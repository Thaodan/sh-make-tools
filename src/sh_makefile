DESTDIR=../pkg
PREFIX=usr
APPNAME=sh_make_tools
VER=2.1
SHPP=shpp/shpp
install_prefix=/usr
alias sh_make="LIBSH=/usr/lib/libsh libdir=$PWD sh_make/sh_make --mod-path=$PWD/sh_make/modules"

default() {
	sh_make_tools
}

prepare() {
	mkdir -p $DESTDIR/$PREFIX	
}

sh_make_tools() {
	prepare
	sh_make 
	shpp
}


shpp() {
	sh_make -f shpp/sh_makefile DESTDIR=../$DESTDIR
	sh_make -f shpp/sh_makefile DESTDIR=../$DESTDIR install
}

sh_make() {
	sh_make -f sh_make/sh_makefile DESTDIR=../$DESTDIR
	sh_make -f sh_make/sh_makefile DESTDIR=../$DESTDIR install
}

clean()  {
	sh  -c 'cd sh_make; . $PWD/sh_makefile; clean'
	rm -f sh_make_pkg
	rm -rf pkg
	rm -f ../install.sh
}

installer() {
	load_module configure
	load_module make_installer
	gen_installer > ../install.sh
}
